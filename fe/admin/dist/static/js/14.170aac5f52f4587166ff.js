webpackJsonp([14],{GW5J:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},GtPP:function(n,e,t){var a=t("GW5J");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("36540b69",a,!0)},joyA:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("YY3n"),i=t("STSY"),l=t("5ybE"),s={name:"viewUser",props:{roleId:{type:Number,required:!0}},data:function(){return{total:-1,unTotal:-1,pageNum:1,pageSize:10,unPageNum:1,unPageSize:10,userList:null,multipleSelection:[],removeSelection:[],departmentTree:null,searchLoginName:null,searchUserName:null,searchUnUserName:null,searchUnLoginName:null,roleUserList:null,listLoading:!1,treeVisible:!1,dialogVisible:!1,editDisabled:!1,addForm:{roleName:"",roleDes:""},defaultProps:{children:"children",label:"label"}}},watch:{roleId:function(n){this.fetchData(this.roleId,null,null,this.pageNum,this.pageSize),this.initDepartmentTree()}},mounted:function(){Object(a.a)(location.hash.substring(2)),this.fetchData(this.roleId,null,null,this.pageNum,this.pageSize),this.initDepartmentTree()},methods:{fetchData:function(n,e,t,a,l){var s=this;this.listLoading=!0,Object(i.i)(n,e,t,a,l).then(function(n){s.roleUserList=n.data.data.rows,s.roleUserList.forEach(function(n,e){n.idx=e}),s.total=n.data.data.total,s.pageNum=n.data.data.pageNum,s.pageSize=n.data.data.pageSize,s.listLoading=!1})},searchUser:function(){this.fetchData(this.roleId,this.searchLoginName,this.searchUserName,this.pageNum,this.pageSize)},searchUnUser:function(){this.getUserList(this.roleId,this.departmentId,this.searchUnLoginName,this.searchUnUserName,3,this.pageNum,this.pageSize)},initDepartmentTree:function(){var n=this;Object(l.e)().then(function(e){n.departmentTree=e.data.data})},getUserList:function(n,e,t,a){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,s=this,o=arguments[5],r=arguments[6];this.listLoading=!0,Object(i.e)(n,e,t,a,l,o,r).then(function(n){s.userList=n.data.data.rows,s.userList.forEach(function(n,e){n.idx=e}),s.unTotal=n.data.data.total,s.unPageNum=n.data.data.pageNum,s.unPageSize=n.data.data.pageSize,s.listLoading=!1})},handleCurrentPageChangeRole:function(n){this.pageNum=n,this.fetchData(this.roleId,this.searchLoginName,this.searchUserName,this.pageNum,this.pageSize)},handleCurrentPageChangeUser:function(n){this.pageNum=n,this.getUserList(this.roleId,this.departmentId,this.searchUnLoginName,this.searchUnUserName,3,this.unPageNum,this.unPageSize)},handleNodeClick:function(n){this.departmentId=n.id,n.parentId||(this.departmentId=null),this.getUserList(this.roleId,this.departmentId,null,null,3,this.unPageNum,this.unPageSize)},handleSelectionChange:function(n){this.multipleSelection=n},handleRemoveSelection:function(n){var e=this;this.removeSelection=n,n.length>0?n.forEach(function(n){1===n.id?e.editDisabled=!0:e.editDisabled=!1}):this.editDisabled=!1},goAddRoleUser:function(){this.dialogVisible=!0,this.getUserList(this.roleId,this.departmentId,null,null,3,this.unPageNum,this.unPageSize)},saveAddUser:function(){var n=this;this.multipleSelection.length<1?this.$message({type:"warning",message:"请至少选中一行再执行此操作",duration:"2000"}):this.$confirm("确定保存？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e=n.multipleSelection,t=[],a=0;a<e.length;a++)t.push(e[a].id);Object(i.b)(n.roleId,t.join(",")).then(function(){n.$message({type:"success",message:"保存成功",duration:2e3,onClose:function(){n.fetchData(n.roleId,n.searchLoginName,n.searchUserName,n.pageNum,n.pageSize),n.dialogVisible=!1}})})})},deleteRoleUser:function(){var n=this;this.removeSelection.length<1?this.$message({type:"warning",message:"请至少选中一行再执行此操作",duration:"2000"}):this.$confirm("此操作将永久删除该角色，是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e=n.removeSelection,t=[],a=0;a<e.length;a++)t.push(e[a].id);Object(i.g)(n.roleId,t.join(",")).then(function(){n.$message({type:"success",message:"删除成功",duration:2e3,onClose:function(){n.fetchData(n.roleId,n.searchLoginName,n.searchUserName,n.pageNum,n.pageSize)}})})})},resetForm:function(n){this.$refs[n].resetFields()},handleClose:function(n){this.$confirm("确认关闭吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n()}).catch(function(){})}}},o={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"container"},[t("el-form",[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{"label-width":"70px",label:"登录名"}},[t("el-input",{staticStyle:{"min-width":"120px"},model:{value:n.searchLoginName,callback:function(e){n.searchLoginName=e},expression:"searchLoginName"}})],1)],1),n._v(" "),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{"label-width":"80px",label:"用户昵称"}},[t("el-input",{staticStyle:{"min-width":"120px"},model:{value:n.searchUserName,callback:function(e){n.searchUserName=e},expression:"searchUserName"}})],1)],1),n._v(" "),t("el-col",{attrs:{span:3}},[t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",loading:n.listLoading},on:{click:n.searchUser}},[n._v("查询")])],1)],1),n._v(" "),t("div",{staticClass:"btn_box"},[t("el-button",{staticClass:"el-button--primary",attrs:{code:"add"},on:{click:n.goAddRoleUser}},[n._v("添加角色用户")]),n._v(" "),t("el-button",{staticClass:"el-button--danger",attrs:{code:"del",disabled:n.editDisabled},on:{click:n.deleteRoleUser}},[n._v("删除角色用户")])],1),n._v(" "),t("el-dialog",{attrs:{title:"添加角色用户",visible:n.dialogVisible,width:"80%","append-to-body":"","before-close":n.handleClose},on:{"update:visible":function(e){n.dialogVisible=e}}},[t("el-row",[t("el-col",{attrs:{span:5}},[t("el-button",{staticClass:"el-button--primary",attrs:{size:"small",code:"save"},on:{click:n.saveAddUser}},[n._v("保存")]),n._v(" "),t("h4",{staticStyle:{"margin-top":"0",color:"#606266"}},[n._v("部门列表")]),n._v(" "),t("el-tree",{ref:"tree",attrs:{data:n.departmentTree,"node-key":"id","highlight-current":"","default-expand-all":"","expand-on-click-node":!1,props:n.defaultProps},on:{"node-click":n.handleNodeClick}})],1),n._v(" "),t("el-col",{attrs:{span:18}},[t("el-form",[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{"label-width":"70px",label:"登录名"}},[t("el-input",{staticStyle:{"min-width":"120px"},model:{value:n.searchUnLoginName,callback:function(e){n.searchUnLoginName=e},expression:"searchUnLoginName"}})],1)],1),n._v(" "),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{"label-width":"80px",label:"用户昵称"}},[t("el-input",{staticStyle:{"min-width":"120px"},model:{value:n.searchUnUserName,callback:function(e){n.searchUnUserName=e},expression:"searchUnUserName"}})],1)],1),n._v(" "),t("el-col",{attrs:{span:3}},[t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",loading:n.listLoading},on:{click:n.searchUnUser}},[n._v("查询")])],1)],1),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:n.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:n.userList,"element-loading-text":"拼命加载中",border:"",fit:"","tooltip-effect":"dark","highlight-current-row":""},on:{"selection-change":n.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),n._v(" "),t("el-table-column",{attrs:{label:"登录名"},scopedSlots:n._u([{key:"default",fn:function(e){return[n._v("\n                  "+n._s(e.row.loginName)+"\n                ")]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"部门"},scopedSlots:n._u([{key:"default",fn:function(e){return[n._v("\n                  "+n._s(e.row.departmentName)+"\n                ")]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"用户昵称"},scopedSlots:n._u([{key:"default",fn:function(e){return[n._v("\n                  "+n._s(e.row.userName)+"\n                ")]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"手机号"},scopedSlots:n._u([{key:"default",fn:function(e){return[n._v("\n                  "+n._s(e.row.mobile)+"\n                ")]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"状态"},scopedSlots:n._u([{key:"default",fn:function(e){return[n._v("\n                  "+n._s(1==e.row.status?"正常":"冻结")+"\n                ")]}}])})],1),n._v(" "),t("el-pagination",{staticStyle:{float:"right","margin-top":"15px"},attrs:{background:"",layout:"prev, pager, next",total:n.unTotal,"page-size":n.unPageSize},on:{"current-change":n.handleCurrentPageChangeUser}})],1)],1)],1)],1),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:n.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:n.roleUserList,"element-loading-text":"拼命加载中",border:"",fit:"","tooltip-effect":"dark","highlight-current-row":""},on:{"selection-change":n.handleRemoveSelection}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),n._v(" "),t("el-table-column",{attrs:{prop:"loginName",label:"登录名",width:"180"}}),n._v(" "),t("el-table-column",{attrs:{label:"部门"},scopedSlots:n._u([{key:"default",fn:function(e){return[n._v("\n          "+n._s(e.row.departmentName)+"\n        ")]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"用户昵称"},scopedSlots:n._u([{key:"default",fn:function(e){return[n._v("\n          "+n._s(e.row.userName)+"\n        ")]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"手机号"},scopedSlots:n._u([{key:"default",fn:function(e){return[n._v("\n          "+n._s(e.row.mobile)+"\n        ")]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"状态"},scopedSlots:n._u([{key:"default",fn:function(e){return[n._v("\n          "+n._s(1==e.row.status?"正常":"冻结")+"\n        ")]}}])})],1),n._v(" "),t("el-pagination",{staticStyle:{float:"right","margin-top":"15px"},attrs:{background:"",layout:"prev, pager, next",total:n.total,"page-size":n.pageSize},on:{"current-change":n.handleCurrentPageChangeRole}})],1)],1)},staticRenderFns:[]};var r=t("VU/8")(s,o,!1,function(n){t("GtPP")},"data-v-7d265ff6",null);e.default=r.exports}});