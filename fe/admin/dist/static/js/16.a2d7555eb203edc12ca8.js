webpackJsonp([16],{"6CQ8":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("YY3n"),l=t("dmtY"),i={name:"menuAuthor",data:function(){return{treeMenu:null,unRoleList:null,roleList:null,listLoading:!1,functionId:null,searchRoleName:null,searchRoleValue:null,searchUnRoleName:null,searchUnRoleValue:null,roleTotal:-1,unRoleTotal:-1,pageNum:1,pageSize:10,unPageNum:1,unPageSize:10,roleDialog:!1,roleSelections:[],unRoleSelections:[],editDisabled:!1,defaultProps:{children:"children",label:"label"}}},mounted:function(){Object(a.a)(location.hash.substring(2)),this.initTreeMenu()},methods:{initTreeMenu:function(){var n=this;Object(l.g)().then(function(e){n.treeMenu=e.data.data})},roleData:function(n,e,t,a,i){var o=this;this.listLoading=!0,Object(l.d)(n,e,t,1,a,i).then(function(n){o.roleList=n.data.data.rows,o.roleTotal=n.data.data.total,o.pageNum=n.data.data.pageNum,o.pageSize=n.data.data.pageSize,o.listLoading=!1})},unRoleData:function(n,e,t,a,i){var o=this;this.listLoading=!0,Object(l.d)(n,e,t,2,a,i).then(function(n){o.unRoleList=n.data.data.rows,o.unRoleTotal=n.data.data.total,o.unPageNum=n.data.data.pageNum,o.unPageSize=n.data.data.pageSize,o.listLoading=!1})},getCurrentObj:function(n,e){this.functionId=n.id,this.roleData(this.functionId,this.searchRoleName,this.searchRoleValue,this.pageNum,this.pageSize)},searchRole:function(){this.roleData(this.functionId,this.searchRoleName,this.searchRoleValue,this.pageNum,this.pageSize)},searchUnRole:function(){this.unRoleData(this.functionId,this.searchUnRoleName,this.searchUnRoleValue,this.unPageNum,this.unPageSize)},handleCurrentPageChange:function(n){this.pageNum=n,this.roleData(this.functionId,this.searchRoleName,this.searchRoleValue,this.pageNum,this.pageSize)},handleUnCurrentPageChange:function(n){this.unPageNum=n,this.unRoleData(this.functionId,this.searchUnRoleName,this.searchUnRoleValue,this.unPageNum,this.unPageSize)},handleRoleChange:function(n){var e=this;this.roleSelections=n,n.length>0?n.forEach(function(n){1===n.id?e.editDisabled=!0:e.editDisabled=!1}):this.editDisabled=!1},handleUnRoleChange:function(n){this.unRoleSelections=n},goAddRole:function(){this.functionId?(this.unRoleData(this.functionId,null,null,this.unPageNum,this.unPageSize),this.roleDialog=!0):this.$message({type:"warning",message:"请选择菜单",duration:"2000"})},saveUsers:function(){var n=this;this.unRoleSelections.length<1?this.$message({type:"warning",message:"请至少选中一行再执行此操作",duration:"2000"}):this.$confirm("确认保存？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e=n.unRoleSelections,t=[],a=0;a<e.length;a++)t.push(e[a].id);Object(l.b)(n.functionId,t.join(",")).then(function(e){n.$message({type:"success",message:"保存成功",duration:2e3,onClose:function(){n.roleDialog=!1,n.roleData(n.functionId,n.searchRoleName,n.searchRoleValue,n.pageNum,n.pageSize)}})})})},deleteRole:function(){var n=this;this.roleSelections.length<1?this.$message({type:"warning",message:"请至少选中一行再执行此操作",duration:"2000"}):this.$confirm("此操作将永久删除该角色，是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e=n.roleSelections,t=[],a=0;a<e.length;a++)t.push(e[a].id);Object(l.f)(n.functionId,t.join(",")).then(function(e){n.$message({type:"success",message:"删除成功",duration:2e3,onClose:function(){n.roleData(n.functionId,n.searchRoleName,n.searchRoleValue,n.pageNum,n.pageSize)}})})})},handleClose:function(n){this.$confirm("确认关闭吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n()}).catch(function(){})}}},o={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"container"},[t("el-row",[t("el-col",{attrs:{span:4}},[t("h4",{staticStyle:{"margin-top":"0",color:"#606266"}},[n._v("菜单列表")]),n._v(" "),t("el-tree",{ref:"tree",attrs:{data:n.treeMenu,"node-key":"id","highlight-current":"","default-expand-all":"","expand-on-click-node":!1,props:n.defaultProps},on:{"node-click":n.getCurrentObj}})],1),n._v(" "),t("el-col",{attrs:{span:18}},[t("el-form",[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{"label-width":"70px",label:"角色名"}},[t("el-input",{staticStyle:{"min-width":"120px"},model:{value:n.searchRoleName,callback:function(e){n.searchRoleName=e},expression:"searchRoleName"}})],1)],1),n._v(" "),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{"label-width":"80px",label:"角色值"}},[t("el-input",{staticStyle:{"min-width":"120px"},model:{value:n.searchRoleValue,callback:function(e){n.searchRoleValue=e},expression:"searchRoleValue"}})],1)],1),n._v(" "),t("el-col",{attrs:{span:3}},[t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:n.searchRole}},[n._v("查询")])],1)],1),n._v(" "),t("div",{staticClass:"btn_box"},[t("el-button",{staticClass:"el-button--primary hidden",attrs:{code:"add"},on:{click:n.goAddRole}},[n._v("添加角色")]),n._v(" "),t("el-button",{staticClass:"el-button--danger hidden",attrs:{code:"del",disabled:n.editDisabled},on:{click:n.deleteRole}},[n._v("删除角色")])],1),n._v(" "),t("el-dialog",{attrs:{title:"添加角色",visible:n.roleDialog,width:"60%","before-close":n.handleClose},on:{"update:visible":function(e){n.roleDialog=e}}},[t("el-button",{staticClass:"el-button--primary",staticStyle:{margin:"0 15px 15px"},on:{click:n.saveUsers}},[n._v("保存")]),n._v(" "),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{"label-width":"70px",label:"角色名"}},[t("el-input",{staticStyle:{"min-width":"120px"},model:{value:n.searchUnRoleName,callback:function(e){n.searchUnRoleName=e},expression:"searchUnRoleName"}})],1)],1),n._v(" "),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{"label-width":"80px",label:"角色值"}},[t("el-input",{staticStyle:{"min-width":"120px"},model:{value:n.searchUnRoleValue,callback:function(e){n.searchUnRoleValue=e},expression:"searchUnRoleValue"}})],1)],1),n._v(" "),t("el-col",{attrs:{span:3}},[t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:n.searchUnRole}},[n._v("查询")])],1)],1),n._v(" "),t("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:n.unRoleList,border:"",fit:"","tooltip-effect":"dark","highlight-current-row":""},on:{"selection-change":n.handleUnRoleChange}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),n._v(" "),t("el-table-column",{attrs:{prop:"roleName",label:"角色名",width:"180"}}),n._v(" "),t("el-table-column",{attrs:{prop:"roleValue",label:"角色值",width:"180"}}),n._v(" "),t("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}})],1),n._v(" "),t("el-pagination",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{background:"",layout:"prev, pager, next",total:n.unRoleTotal,"page-size":n.unPageSize},on:{"current-change":n.handleUnCurrentPageChange}})],1),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:n.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:n.roleList,"element-loading-text":"拼命加载中",border:"",fit:"","tooltip-effect":"dark","highlight-current-row":""},on:{"selection-change":n.handleRoleChange}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),n._v(" "),t("el-table-column",{attrs:{prop:"roleName",label:"角色名",width:"180"}}),n._v(" "),t("el-table-column",{attrs:{prop:"roleValue",label:"角色值",width:"180"}}),n._v(" "),t("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}})],1),n._v(" "),t("el-pagination",{staticStyle:{float:"right","margin-top":"15px"},attrs:{background:"",layout:"prev, pager, next",total:n.roleTotal,"page-size":n.pageSize},on:{"current-change":n.handleCurrentPageChange}})],1)],1)],1)],1)},staticRenderFns:[]};var s=t("VU/8")(i,o,!1,function(n){t("wQj+")},"data-v-610dc542",null);e.default=s.exports},Wl7d:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},"wQj+":function(n,e,t){var a=t("Wl7d");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("58054d54",a,!0)}});